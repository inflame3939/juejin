{"ast":null,"code":"var _jsxFileName = \"F:\\\\360Downloads\\\\vs2019\\\\Microsoft VS Code\\\\juejin\\\\juejin-react\\\\src\\\\componments\\\\InfiniteScroll\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport ApiArt from '../ApiArt';\nimport { getArticles } from '../../fake-api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst THRESHOLD = 15;\n\nconst SlidingWindowScrollHook = props => {\n  _s();\n\n  const [start, setStart] = useState(0);\n  const [llist, setLlist] = useState([{\n    id: 1\n  }, {\n    id: 2\n  }, {\n    id: 3\n  }, {\n    id: 4\n  }, {\n    id: 5\n  }, {\n    id: 6\n  }, {\n    id: 7\n  }, {\n    id: 8\n  }, {\n    id: 9\n  }, {\n    id: 10\n  }, {\n    id: 11\n  }, {\n    id: 12\n  }, {\n    id: 13\n  }, {\n    id: 14\n  }, {\n    id: 15\n  }, {\n    id: 16\n  }, {\n    id: 17\n  }, {\n    id: 18\n  }, {\n    id: 19\n  }, {\n    id: 20\n  }, {\n    id: 21\n  }, {\n    id: 22\n  }, {\n    id: 23\n  }, {\n    id: 24\n  }, {\n    id: 25\n  }, {\n    id: 26\n  }, {\n    id: 27\n  }, {\n    id: 28\n  }, {\n    id: 29\n  }, {\n    id: 30\n  }, {\n    id: 31\n  }]);\n  const [end, setEnd] = useState(THRESHOLD); // const [observer, setObserver] = useState(null);\n\n  const [scrollHeight, setScrollHeight] = useState({});\n  const $bottomElement = useRef();\n  const $topElement = useRef(); // const iitem=[0,1,2,3,4,5,6,7,8,9]; \n\n  const offset = 0;\n\n  const ScollPostion = () => {\n    var t; // , l, w, h\n\n    if (document.documentElement && document.documentElement.scrollTop) {\n      t = document.documentElement.scrollTop; // l = document.documentElement.scrollLeft\n      // w = document.documentElement.scrollWidth\n      // h = document.documentElement.scrollHeight\n    } else if (document.body) {\n      t = document.body.scrollTop; // l = document.body.scrollLeft\n      // w = document.body.scrollWidth\n      // h = document.body.scrollHeight\n    }\n\n    return {\n      top: t // left: l,\n      // width: w,\n      // height: h,\n\n    };\n  };\n\n  useEffect(() => {\n    document.documentElement.addEventListener('touchmove', e => {\n      const timer = setTimeout(_ => {\n        const postion = ScollPostion();\n        console.log('滑动距离为：', postion);\n        setScrollHeight(postion.top);\n        clearTimeout(timer);\n      }, 1000);\n    }); // intiateScrollObserver();\n    //   async function helloAsync(){\n    //     await getArticles( 0, 'hot', offset , 10 );\n    //     // console.log('wait',a);\n    //     const c =[{id:+1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},{id:11},{id:12},{id:13},{id:14},{id:+15},{id:+16},{id:17},{id:18},{id:19},{id:20},{id:21},{id:22},{id:23},{id:24},{id:25},{id:26},{id:27},{id:28},{id:29},{id:30},{id:31}]\n    //     // const b = a.data.articles\n    //     const e = c\n    //     return e\n    // }\n    // helloAsync().then((e)=>{\n    //   // this.setState({\n    //   //   art:e[0],ctime:e[2],\n    //   //   cateName:{\n    //   //     first_category_name:e[3].first_category_name,\n    //   //     second_category_name:e[3].second_category_name},\n    //   //   brief_content:e[4].brief_content,title:e[4].title,cover_image:e[4].cover_image,collect_count:e[4].collect_count,digg_count:e[4].digg_count,comment_count:e[4].comment_count,\n    //   //   success:true},()=>{console.log(this.state.success)}\n    //   // )\n    //   // const newLlist = e\n    //   // setLlist([...llist,newLlist])\n    // })\n    // return () => {\n    //   resetObservation()\n    // }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [end]); // const intiateScrollObserver = () => {\n  //   const options = {\n  //     root: null,\n  //     rootMargin: '0px',\n  //     threshold: 0.1\n  //   };\n  //   // const Observer = new IntersectionObserver(callback, options)\n  //   console.log($topElement);\n  //   if ($topElement.current) {\n  //     // Observer.observe($topElement.current);\n  //   }\n  //   if ($bottomElement.current) {\n  //     // Observer.observe($bottomElement.current);\n  //   }\n  //   // setObserver(Observer)\n  // }\n  // const callback = (entries, observer) => {\n  //   entries.forEach((entry, index) => {\n  //     // const listLength = props.list.length;\n  //     // const listLength = 45;\n  //     // Scroll Down\n  //     // if ( scrollHeight> 1500 ) {\n  //     //   console.log('shushushua');\n  //     //   const maxStartIndex = listLength - 1 - THRESHOLD;     // Maximum index value `start` can take\n  //     //   const maxEndIndex = listLength - 1;                   // Maximum index value `end` can take\n  //     //   const newEnd = (end + 10) <= maxEndIndex ? end + 10 : maxEndIndex;\n  //     //   const newStart = (end - 5) <= maxStartIndex ? end - 5 : maxStartIndex;\n  //     //   setStart(newStart)\n  //     //   setEnd(newEnd)\n  //     // }\n  //     // // Scroll up\n  //     // if ( scrollHeight> 1500 && entry.target.id === \"top\") {\n  //     //   const newEnd = end === THRESHOLD ? THRESHOLD : (end - 10 > THRESHOLD ? end - 10 : THRESHOLD);\n  //     //   let newStart = start === 0 ? 0 : (start - 10 > 0 ? start - 10 : 0);\n  //     //   setStart(newStart)\n  //     //   setEnd(newEnd)\n  //     // }\n  //   });\n  // }\n  // const resetObservation = () => {\n  //   // observer && observer.unobserve($bottomElement.current);\n  //   // observer && observer.unobserve($topElement.current);\n  // }\n\n  const getReference = (index, isLastIndex) => {\n    if (index === 0) return $topElement;\n    if (isLastIndex) return $bottomElement;\n    return null;\n  };\n\n  const listLength = 45;\n\n  if (scrollHeight > 1300 && (start === 0 || start / 10 === 1)) {\n    console.log('shushushua');\n    const maxStartIndex = listLength - 1 - THRESHOLD; // Maximum index value `start` can take\n\n    const maxEndIndex = listLength - 1; // Maximum index value `end` can take\n\n    const newEnd = end + 10 <= maxEndIndex ? end + 10 : maxEndIndex;\n    const newStart = end - 5 <= maxStartIndex ? end - 5 : maxStartIndex;\n    setStart(newStart);\n    setEnd(newEnd);\n  } // Scroll up\n  // if ( scrollHeight> 1500 ) {\n  //   const newEnd = end === THRESHOLD ? THRESHOLD : (end - 10 > THRESHOLD ? end - 10 : THRESHOLD);\n  //   let newStart = start === 0 ? 0 : (start - 10 > 0 ? start - 10 : 0);\n  //   setStart(newStart)\n  //   setEnd(newEnd)\n  // }\n\n\n  const {\n    height\n  } = props;\n  const updatedList = llist.slice(0, end);\n  console.log(updatedList);\n  const lastIndex = updatedList.length - 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    children: updatedList.map((item, index) => {\n      const top = height * (index + start) + 'px';\n      const refVal = getReference(index, index === lastIndex);\n      const id = item.id === 1 ? 'top' : item.id === lastIndex ? 'bottom' : '';\n      return (\n        /*#__PURE__*/\n        // <li className=\"li-card\" key={item.key} style={{top}} ref={refVal} id={id}>{item.value}</li>\n        // console.log(item.id-1)\n        _jsxDEV(ApiArt, {\n          iitem: item.id - 1,\n          style: {\n            top\n          },\n          ref: refVal,\n          offset: offset,\n          id: id\n        }, item.id - 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this) // <div></div>\n\n      );\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SlidingWindowScrollHook, \"ZOBoZN95kLclhbY7hzObXczciu4=\");\n\n_c = SlidingWindowScrollHook;\nexport { SlidingWindowScrollHook };\n\nvar _c;\n\n$RefreshReg$(_c, \"SlidingWindowScrollHook\");","map":{"version":3,"sources":["F:/360Downloads/vs2019/Microsoft VS Code/juejin/juejin-react/src/componments/InfiniteScroll/index.js"],"names":["React","useState","useEffect","useRef","ApiArt","getArticles","THRESHOLD","SlidingWindowScrollHook","props","start","setStart","llist","setLlist","id","end","setEnd","scrollHeight","setScrollHeight","$bottomElement","$topElement","offset","ScollPostion","t","document","documentElement","scrollTop","body","top","addEventListener","e","timer","setTimeout","_","postion","console","log","clearTimeout","getReference","index","isLastIndex","listLength","maxStartIndex","maxEndIndex","newEnd","newStart","height","updatedList","slice","lastIndex","length","position","map","item","refVal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport ApiArt from '../ApiArt'\r\nimport { getArticles } from '../../fake-api';\r\n\r\nconst THRESHOLD = 15;\r\n \r\nconst SlidingWindowScrollHook = (props) =>  {\r\n  const [start, setStart] = useState(0);\r\n  const [llist, setLlist] = useState([{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},{id:11},{id:12},{id:13},{id:14},{id:15},{id:16},{id:17},{id:18},{id:19},{id:20},{id:21},{id:22},{id:23},{id:24},{id:25},{id:26},{id:27},{id:28},{id:29},{id:30},{id:31}]);\r\n  const [end, setEnd] = useState(THRESHOLD);\r\n  // const [observer, setObserver] = useState(null);\r\n  const [scrollHeight, setScrollHeight] = useState({});\r\n  \r\n  const $bottomElement = useRef();\r\n  const $topElement = useRef();\r\n  // const iitem=[0,1,2,3,4,5,6,7,8,9]; \r\n  const offset = 0;\r\n\r\n  const ScollPostion = () => {\r\n    var t\r\n    // , l, w, h\r\n\r\n    if (document.documentElement && document.documentElement.scrollTop) {\r\n      t = document.documentElement.scrollTop\r\n      // l = document.documentElement.scrollLeft\r\n      // w = document.documentElement.scrollWidth\r\n      // h = document.documentElement.scrollHeight\r\n    } else if (document.body) {\r\n      t = document.body.scrollTop\r\n      // l = document.body.scrollLeft\r\n      // w = document.body.scrollWidth\r\n      // h = document.body.scrollHeight\r\n    }\r\n    return {\r\n      top: t,\r\n      // left: l,\r\n      // width: w,\r\n      // height: h,\r\n    }\r\n  }\r\n  \r\n  useEffect(() => {\r\n    document.documentElement.addEventListener('touchmove', (e) => {\r\n      const timer = setTimeout((_) => {\r\n        const postion = ScollPostion()\r\n        console.log('滑动距离为：', postion)\r\n        setScrollHeight( postion.top )\r\n        clearTimeout(timer)\r\n      }, 1000)\r\n    })\r\n  \r\n    // intiateScrollObserver();\r\n  //   async function helloAsync(){\r\n  //     await getArticles( 0, 'hot', offset , 10 );\r\n  //     // console.log('wait',a);\r\n  //     const c =[{id:+1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},{id:11},{id:12},{id:13},{id:14},{id:+15},{id:+16},{id:17},{id:18},{id:19},{id:20},{id:21},{id:22},{id:23},{id:24},{id:25},{id:26},{id:27},{id:28},{id:29},{id:30},{id:31}]\r\n  //     // const b = a.data.articles\r\n  //     const e = c\r\n  //     return e\r\n  // }\r\n  // helloAsync().then((e)=>{\r\n  //   // this.setState({\r\n  //   //   art:e[0],ctime:e[2],\r\n  //   //   cateName:{\r\n  //   //     first_category_name:e[3].first_category_name,\r\n  //   //     second_category_name:e[3].second_category_name},\r\n  //   //   brief_content:e[4].brief_content,title:e[4].title,cover_image:e[4].cover_image,collect_count:e[4].collect_count,digg_count:e[4].digg_count,comment_count:e[4].comment_count,\r\n  //   //   success:true},()=>{console.log(this.state.success)}\r\n  //   // )\r\n\r\n    \r\n\r\n  //   // const newLlist = e\r\n  //   // setLlist([...llist,newLlist])\r\n  // })\r\n    // return () => {\r\n    //   resetObservation()\r\n  // }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[end])\r\n \r\n  // const intiateScrollObserver = () => {\r\n  //   const options = {\r\n  //     root: null,\r\n  //     rootMargin: '0px',\r\n  //     threshold: 0.1\r\n  //   };\r\n  //   // const Observer = new IntersectionObserver(callback, options)\r\n  //   console.log($topElement);\r\n  //   if ($topElement.current) {\r\n  //     // Observer.observe($topElement.current);\r\n  //   }\r\n  //   if ($bottomElement.current) {\r\n  //     // Observer.observe($bottomElement.current);\r\n  //   }\r\n  //   // setObserver(Observer)\r\n  // }\r\n \r\n  // const callback = (entries, observer) => {\r\n  //   entries.forEach((entry, index) => {\r\n  //     // const listLength = props.list.length;\r\n  //     // const listLength = 45;\r\n  //     // Scroll Down\r\n  //     // if ( scrollHeight> 1500 ) {\r\n  //     //   console.log('shushushua');\r\n  //     //   const maxStartIndex = listLength - 1 - THRESHOLD;     // Maximum index value `start` can take\r\n  //     //   const maxEndIndex = listLength - 1;                   // Maximum index value `end` can take\r\n  //     //   const newEnd = (end + 10) <= maxEndIndex ? end + 10 : maxEndIndex;\r\n  //     //   const newStart = (end - 5) <= maxStartIndex ? end - 5 : maxStartIndex;\r\n  //     //   setStart(newStart)\r\n  //     //   setEnd(newEnd)\r\n  //     // }\r\n  //     // // Scroll up\r\n  //     // if ( scrollHeight> 1500 && entry.target.id === \"top\") {\r\n  //     //   const newEnd = end === THRESHOLD ? THRESHOLD : (end - 10 > THRESHOLD ? end - 10 : THRESHOLD);\r\n  //     //   let newStart = start === 0 ? 0 : (start - 10 > 0 ? start - 10 : 0);\r\n  //     //   setStart(newStart)\r\n  //     //   setEnd(newEnd)\r\n  //     // }\r\n \r\n  //   });\r\n  // }\r\n  // const resetObservation = () => {\r\n  //   // observer && observer.unobserve($bottomElement.current);\r\n  //   // observer && observer.unobserve($topElement.current);\r\n  // }\r\n \r\n \r\n  const getReference = (index, isLastIndex) => {\r\n    if (index === 0)\r\n      return $topElement;\r\n    if (isLastIndex) \r\n      return $bottomElement;\r\n    return null;\r\n  }\r\n  const listLength = 45;\r\n  if ( scrollHeight> 1300 && (start === 0 || start/10 === 1)) {\r\n    console.log('shushushua');\r\n    const maxStartIndex = listLength - 1 - THRESHOLD;     // Maximum index value `start` can take\r\n    const maxEndIndex = listLength - 1;                   // Maximum index value `end` can take\r\n    const newEnd = (end + 10) <= maxEndIndex ? end + 10 : maxEndIndex;\r\n    const newStart = (end - 5) <= maxStartIndex ? end - 5 : maxStartIndex;\r\n    setStart(newStart)\r\n    setEnd(newEnd)\r\n  }\r\n  // Scroll up\r\n  // if ( scrollHeight> 1500 ) {\r\n  //   const newEnd = end === THRESHOLD ? THRESHOLD : (end - 10 > THRESHOLD ? end - 10 : THRESHOLD);\r\n  //   let newStart = start === 0 ? 0 : (start - 10 > 0 ? start - 10 : 0);\r\n  //   setStart(newStart)\r\n  //   setEnd(newEnd)\r\n  // }\r\n  const {height} = props;\r\n  const updatedList = llist.slice(0, end);\r\n  console.log(updatedList);\r\n  const lastIndex = updatedList.length - 1;\r\n\r\n  return (\r\n    <div style={{position: 'relative'}}>\r\n      {updatedList.map((item, index) => {\r\n        const top = (height * (index + start)) + 'px';\r\n        const refVal = getReference(index, index === lastIndex);\r\n        const id = item.id === 1 ? 'top' : (item.id === lastIndex ? 'bottom' : '');\r\n        return (\r\n            // <li className=\"li-card\" key={item.key} style={{top}} ref={refVal} id={id}>{item.value}</li>\r\n            // console.log(item.id-1)\r\n          <ApiArt iitem={item.id-1} key={item.id-1} style={{top}} ref={refVal} offset={offset} id={id}></ApiArt>\r\n            \r\n            // <div></div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\nexport { SlidingWindowScrollHook };\r\n"]},"metadata":{},"sourceType":"module"}